{% extends "base.html" %}
{% block title %}Patient Dashboard | HMS{% endblock %}
{% block content %}
<h2>Patient Dashboard</h2>
<p>Welcome, {{ session.get('full_name') }}.</p>

<div class="mt-3 mb-4">
    <a href="{{ url_for('main.patient_doctors') }}" class="btn btn-primary me-2">
        Find Doctors & Book Appointment
    </a>
    <a href="{{ url_for('main.patient_appointments') }}" class="btn btn-outline-secondary">
        My Appointments
    </a>
</div>

<h4>Departments / Specializations</h4>
<ul>
    {% for dept in departments %}
    <li>{{ dept['name'] }} - {{ dept['description'] }}</li>
    {% endfor %}
</ul>

<h4 class="mt-4">Doctor Availability (Next 7 Days)</h4>
<table class="table table-striped table-bordered align-middle">
    <thead class="table-light">
        <tr>
            <th>Date</th>
            <th>Time Window</th>
            <th>Doctor</th>
            <th>Specialization</th>
        </tr>
    </thead>
    <tbody>
    {% if availability %}
        {% for a in availability %}
        <tr>
            <td>{{ a['date'] }}</td>
            <td>{{ a['start_time'] }} â€“ {{ a['end_time'] }}</td>
            <td>{{ a['doctor_name'] }}</td>
            <td>{{ a['dept_name'] or 'N/A' }}</td>
        </tr>
        {% endfor %}
    {% else %}
        <tr>
            <td colspan="4" class="text-center">No availability data yet.</td>
        </tr>
    {% endif %}
    </tbody>
</table>
{% endblock %}
